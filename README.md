# MAMCTG
基于大语言模型和循环思维链提示的多属性控制多模态可控文本生成

该方法确定文本控制元素和视觉控制元素，基于文本控制元素和视觉控制元素，进行至少两次文本生成推理，得到至少两个文本生成中间结果，对至少两个文本生成中间结果进行拼接，得到思维链提示，基于文本控制元素、 思维链提示和视觉控制元素，迭代进行文本生成推理，直到文本生成中间结果收敛，将收敛的文本生成中间结果作为文本生成结果，其中，将本轮迭代输出的文本生成中间结果拼接到本轮迭代输入的思维链提示中，作为下一轮迭代输入的思维链提示。 本公开训练成本低，生成的文本上下文语义流畅，可以将文本与视觉信息进行匹配，从而实现更高水平的多模态控制。

## 目录结构
- `main.py`：主程序入口
- `eval.py`：评价程序
- `demo.py`：演示程序
- `ablation.py`：对比程序，可进行单次生好吃呢个
- `process_data.py` `process_data_to_model.py`：数据格式转换工具
- `commands/`：命令，可下载模型权重，可运行主程序

## 快速开始


1. 在Senticap数据集上，以gemma-7b-it为模型运行主程序

   ```
   bash commands/rungm_senticap.sh
   ```

2. 或在Senticap数据集上，以flan-t5-xl为模型运行主程序

   ```
   bash commands/runflan_senticap.sh
   ```

